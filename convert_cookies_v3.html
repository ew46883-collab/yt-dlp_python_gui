<!DOCTYPE html>
<html lang="en"> <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie Converter Tool</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f4f7f9;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px 0;
        }
        .container {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
            box-sizing: border-box;
        }
        h1 {
            text-align: center;
            color: #1a73e8;
            margin-bottom: 25px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label, select {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        input[type="file"], input[type="text"], select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20width%3D%2220%22%20height%3D%2220%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M5%206l5%205%205-5%202%201-7%207-7-7%202-1z%22%20fill%3D%22%23555%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 16px;
        }
        #convertButton {
            width: 100%;
            padding: 12px;
            background-color: #1a73e8;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        #convertButton:hover {
            background-color: #1558b8;
        }
        .status {
            margin-top: 20px;
            padding: 12px;
            border-radius: 4px;
            text-align: center;
            font-weight: bold;
            display: none;
        }
        .status.success {
            background-color: #e6f4ea;
            color: #2e7d32;
        }
        .status.error {
            background-color: #fce8e6;
            color: #c5221f;
        }
    </style>
</head>
<body>

<div class="container">
    
    <div class="form-group">
        <label for="langSelector" data-lang-key="label_language">Language:</label>
        <select id="langSelector">
            <option value="en">English</option>
            <option value="zh">ÁÆÄ‰Ωì‰∏≠Êñá</option>
            <option value="ja">Êó•Êú¨Ë™û</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="fr">Fran√ßais</option>
            <option value="es">Espa√±ol</option>
            <option value="de">Deutsch</option>
            <option value="it">Italiano</option>
            <option value="ko">ÌïúÍµ≠Ïñ¥</option>
        </select>
    </div>

    <h1 data-lang-key="page_title">Cookie Format Converter</h1>
    <p data-lang-key="page_description">Convert JSON format cookies to Netscape format (txt).</p>

    <div class="form-group">
        <label for="jsonFileInput" data-lang-key="label_json_file">1. Select cookies.json file:</label>
        <input type="file" id="jsonFileInput" accept=".json">
    </div>

    <div class="form-group">
        <label for="outputFileName" data-lang-key="label_output_file">2. Specify output file name:</label>
        <input type="text" id="outputFileName" value="cookies.txt">
    </div>

    <button id="convertButton" data-lang-key="button_convert">Start Conversion</button>

    <div id="statusMessage" class="status"></div>
</div>

<script>

/**
 * ÁøªËØëÊñáÊú¨Â≠òÂÇ® (Â∑≤Êõ¥Êñ∞)
 */
const translations = {
    // Ëã±Êñá (ÈªòËÆ§)
    en: {
        html_title: "Cookie Converter Tool",
        page_title: "Cookie Format Converter",
        page_description: "Convert JSON format cookies to Netscape format (txt).",
        label_language: "üåèLanguage:",
        label_json_file: "1. Select cookies.json file:",
        label_output_file: "2. Specify output file name:",
        button_convert: "Start Conversion",
        status_no_file: "Error: Please select a JSON file first!",
        status_no_filename: "Error: Please enter a valid output file name!",
        status_not_list: "Error: JSON file must be a list of cookie objects!",
        status_json_error: "Error: JSON file format is incorrect, please check the file!",
        status_read_error: "Error: An error occurred while reading the file!",
        status_generic_error: "An error occurred: {error}",
        status_success: "Successfully generated {fileName}!"
    },
    // ‰∏≠Êñá
    zh: {
        html_title: "Cookie Ê†ºÂºèËΩ¨Êç¢Â∑•ÂÖ∑",
        page_title: "Cookie Ê†ºÂºèËΩ¨Êç¢",
        page_description: "Â∞Ü JSON Ê†ºÂºèÁöÑ Cookie Êñá‰ª∂ËΩ¨Êç¢‰∏∫ Netscape Ê†ºÂºè (txt)„ÄÇ",
        label_language: "üåèËØ≠Ë®Ä:",
        label_json_file: "1. ÈÄâÊã© cookies.json Êñá‰ª∂Ôºö",
        label_output_file: "2. ÊåáÂÆöËæìÂá∫Êñá‰ª∂ÂêçÔºö",
        button_convert: "ÂºÄÂßãËΩ¨Êç¢",
        status_no_file: "ÈîôËØØÔºöËØ∑ÂÖàÈÄâÊã©‰∏Ä‰∏™ JSON Êñá‰ª∂ÔºÅ",
        status_no_filename: "ÈîôËØØÔºöËØ∑ËæìÂÖ•ÊúâÊïàÁöÑËæìÂá∫Êñá‰ª∂ÂêçÔºÅ",
        status_not_list: "ÈîôËØØÔºöJSON Êñá‰ª∂ÂøÖÈ°ªÊòØÂåÖÂê´ cookie ÂØπË±°ÁöÑÂàóË°®ÔºÅ",
        status_json_error: "ÈîôËØØÔºöJSON Êñá‰ª∂Ê†ºÂºè‰∏çÊ≠£Á°ÆÔºåËØ∑Ê£ÄÊü•Êñá‰ª∂ÂÜÖÂÆπÔºÅ",
        status_read_error: "ÈîôËØØÔºöËØªÂèñÊñá‰ª∂Êó∂ÂèëÁîüÈîôËØØÔºÅ",
        status_generic_error: "Âá∫Èîô‰∫ÜÔºö{error}",
        status_success: "ÊàêÂäüÁîüÊàê {fileName}ÔºÅ"
    },
    // Êó•ËØ≠
    ja: {
        html_title: "„ÇØ„ÉÉ„Ç≠„ÉºÂ§âÊèõ„ÉÑ„Éº„É´",
        page_title: "„ÇØ„ÉÉ„Ç≠„ÉºÂΩ¢Âºè„ÅÆÂ§âÊèõ",
        page_description: "JSON ÂΩ¢Âºè„ÅÆ„ÇØ„ÉÉ„Ç≠„Éº„Çí Netscape ÂΩ¢Âºè (txt) „Å´Â§âÊèõ„Åó„Åæ„Åô„ÄÇ",
        label_language: "üåèË®ÄË™û:",
        label_json_file: "1. cookies.json „Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû:",
        label_output_file: "2. Âá∫Âäõ„Éï„Ç°„Ç§„É´Âêç„ÇíÊåáÂÆö:",
        button_convert: "Â§âÊèõÈñãÂßã",
        status_no_file: "„Ç®„É©„ÉºÔºö„Åæ„Åö JSON „Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ",
        status_no_filename: "„Ç®„É©„ÉºÔºöÊúâÂäπ„Å™Âá∫Âäõ„Éï„Ç°„Ç§„É´Âêç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ",
        status_not_list: "„Ç®„É©„ÉºÔºöJSON „Éï„Ç°„Ç§„É´„ÅØ„ÇØ„ÉÉ„Ç≠„Éº„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅÆ„É™„Çπ„Éà„Åß„Å™„Åë„Çå„Å∞„Å™„Çä„Åæ„Åõ„ÇìÔºÅ",
        status_json_error: "„Ç®„É©„ÉºÔºöJSON „Éï„Ç°„Ç§„É´„ÅÆÂΩ¢Âºè„ÅåÊ≠£„Åó„Åè„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Éï„Ç°„Ç§„É´„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ",
        status_read_error: "„Ç®„É©„ÉºÔºö„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„ÅüÔºÅ",
        status_generic_error: "„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü: {error}",
        status_success: "{fileName} „ÅÆÁîüÊàê„Å´ÊàêÂäü„Åó„Åæ„Åó„ÅüÔºÅ"
    },
    // ‰øÑËØ≠
    ru: {
        html_title: "–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Ñ–∞–π–ª–æ–≤ cookie",
        page_title: "–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ cookie",
        page_description: "–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ cookie –∏–∑ —Ñ–æ—Ä–º–∞—Ç–∞ JSON –≤ —Ñ–æ—Ä–º–∞—Ç Netscape (txt).",
        label_language: "üåè–Ø–∑—ã–∫:",
        label_json_file: "1. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª cookies.json:",
        label_output_file: "2. –£–∫–∞–∂–∏—Ç–µ –∏–º—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:",
        button_convert: "–ù–∞—á–∞—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ",
        status_no_file: "–û—à–∏–±–∫–∞: –°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ JSON-—Ñ–∞–π–ª!",
        status_no_filename: "–û—à–∏–±–∫–∞: –í–≤–µ–¥–∏—Ç–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∏–º—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞!",
        status_not_list: "–û—à–∏–±–∫–∞: JSON-—Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–ø–∏—Å–∫–æ–º –æ–±—ä–µ–∫—Ç–æ–≤ cookie!",
        status_json_error: "–û—à–∏–±–∫–∞: –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç JSON-—Ñ–∞–π–ª–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª!",
        status_read_error: "–û—à–∏–±–∫–∞: –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞!",
        status_generic_error: "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: {error}",
        status_success: "–§–∞–π–ª {fileName} —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!"
    },
    // Ê≥ïËØ≠
    fr: {
        html_title: "Outil de conversion de cookies",
        page_title: "Convertisseur de format de cookies",
        page_description: "Convertissez les cookies du format JSON au format Netscape (txt).",
        label_language: "üåèLangue:",
        label_json_file: "1. S√©lectionnez le fichier cookies.json :",
        label_output_file: "2. Sp√©cifiez le nom du fichier de sortie :",
        button_convert: "D√©marrer la conversion",
        status_no_file: "Erreur : Veuillez d'abord s√©lectionner un fichier JSON !",
        status_no_filename: "Erreur : Veuillez saisir un nom de fichier de sortie valide !",
        status_not_list: "Erreur : Le fichier JSON doit √™tre une liste d'objets cookie !",
        status_json_error: "Erreur : Le format du fichier JSON est incorrect, veuillez v√©rifier le fichier !",
        status_read_error: "Erreur : Une erreur est survenue lors de la lecture du fichier !",
        status_generic_error: "Une erreur est survenue : {error}",
        status_success: "{fileName} a √©t√© g√©n√©r√© avec succ√®s !"
    },
    // --- Êñ∞Â¢ûËØ≠Ë®Ä ---
    // Ë•øÁè≠ÁâôËØ≠
    es: {
        html_title: "Herramienta de conversi√≥n de cookies",
        page_title: "Convertidor de formato de cookies",
        page_description: "Convertir cookies de formato JSON a formato Netscape (txt).",
        label_language: "üåèIdioma:",
        label_json_file: "1. Seleccionar archivo cookies.json:",
        label_output_file: "2. Especificar nombre del archivo de salida:",
        button_convert: "Iniciar conversi√≥n",
        status_no_file: "Error: ¬°Por favor, seleccione un archivo JSON primero!",
        status_no_filename: "Error: ¬°Por favor, ingrese un nombre de archivo de salida v√°lido!",
        status_not_list: "Error: ¬°El archivo JSON debe ser una lista de objetos cookie!",
        status_json_error: "Error: ¬°El formato del archivo JSON es incorrecto, por favor revise el archivo!",
        status_read_error: "Error: ¬°Ocurri√≥ un error al leer el archivo!",
        status_generic_error: "Ocurri√≥ un error: {error}",
        status_success: "¬°{fileName} generado exitosamente!"
    },
    // Âæ∑ËØ≠
    de: {
        html_title: "Cookie-Konverter-Tool",
        page_title: "Cookie-Formatkonverter",
        page_description: "Konvertieren Sie Cookies im JSON-Format in das Netscape-Format (txt).",
        label_language: "üåèSprache:",
        label_json_file: "1. cookies.json-Datei ausw√§hlen:",
        label_output_file: "2. Ausgabedateiname angeben:",
        button_convert: "Konvertierung starten",
        status_no_file: "Fehler: Bitte w√§hlen Sie zuerst eine JSON-Datei aus!",
        status_no_filename: "Fehler: Bitte geben Sie einen g√ºltigen Ausgabedateiname ein!",
        status_not_list: "Fehler: Die JSON-Datei muss eine Liste von Cookie-Objekten sein!",
        status_json_error: "Fehler: Das JSON-Dateiformat ist falsch, bitte √ºberpr√ºfen Sie die Datei!",
        status_read_error: "Fehler: Beim Lesen der Datei ist ein Fehler aufgetreten!",
        status_generic_error: "Ein Fehler ist aufgetreten: {error}",
        status_success: "{fileName} erfolgreich generiert!"
    },
    // ÊÑèÂ§ßÂà©ËØ≠
    it: {
        html_title: "Strumento di conversione cookie",
        page_title: "Convertitore di formato cookie",
        page_description: "Converti i cookie dal formato JSON al formato Netscape (txt).",
        label_language: "üåèLingua:",
        label_json_file: "1. Seleziona il file cookies.json:",
        label_output_file: "2. Specifica il nome del file di output:",
        button_convert: "Avvia conversione",
        status_no_file: "Errore: seleziona prima un file JSON!",
        status_no_filename: "Errore: inserisci un nome file di output valido!",
        status_not_list: "Errore: il file JSON deve essere un elenco di oggetti cookie!",
        status_json_error: "Errore: il formato del file JSON non √® corretto, controlla il file!",
        status_read_error: "Errore: si √® verificato un errore durante la lettura del file!",
        status_generic_error: "Si √® verificato un errore: {error}",
        status_success: "{fileName} generato con successo!"
    },
    // Èü©ËØ≠
    ko: {
        html_title: "Ïø†ÌÇ§ Î≥ÄÌôò ÎèÑÍµ¨",
        page_title: "Ïø†ÌÇ§ ÌòïÏãù Î≥ÄÌôòÍ∏∞",
        page_description: "JSON ÌòïÏãù Ïø†ÌÇ§Î•º Netscape ÌòïÏãù(txt)ÏúºÎ°ú Î≥ÄÌôòÌï©ÎãàÎã§.",
        label_language: "üåèÏñ∏Ïñ¥:",
        label_json_file: "1. cookies.json ÌååÏùº ÏÑ†ÌÉù:",
        label_output_file: "2. Ï∂úÎ†• ÌååÏùº Ïù¥Î¶Ñ ÏßÄÏ†ï:",
        button_convert: "Î≥ÄÌôò ÏãúÏûë",
        status_no_file: "Ïò§Î•ò: Î®ºÏ†Ä JSON ÌååÏùºÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî!",
        status_no_filename: "Ïò§Î•ò: Ïú†Ìö®Ìïú Ï∂úÎ†• ÌååÏùº Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî!",
        status_not_list: "Ïò§Î•ò: JSON ÌååÏùºÏùÄ Ïø†ÌÇ§ Í∞ùÏ≤¥ Î™©Î°ùÏù¥Ïñ¥Ïïº Ìï©ÎãàÎã§!",
        status_json_error: "Ïò§Î•ò: JSON ÌååÏùº ÌòïÏãùÏù¥ Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§. ÌååÏùºÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî!",
        status_read_error: "Ïò§Î•ò: ÌååÏùºÏùÑ ÏùΩÎäî Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§!",
        status_generic_error: "Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: {error}",
        status_success: "{fileName}Ïù¥(Í∞Ä) ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!"
    }
};

// Â≠òÂÇ®ÂΩìÂâçÈÄâÊã©ÁöÑËØ≠Ë®Ä
let currentLang = 'en'; // ÈªòËÆ§Ëã±Êñá

/**
 * ËæÖÂä©ÂáΩÊï∞ÔºöËé∑ÂèñÁøªËØëÊñáÊú¨
 */
function getTranslation(key, params = {}) {
    let text = (translations[currentLang] && translations[currentLang][key]) || translations['en'][key];
    if (!text) return key;
    for (const paramKey in params) {
        text = text.replace(new RegExp(`{${paramKey}}`, 'g'), params[paramKey]);
    }
    return text;
}

/**
 * ËÆæÁΩÆÈ°µÈù¢ËØ≠Ë®Ä
 */
function setLanguage(lang) {
    if (!translations[lang]) {
        lang = 'en';
    }
    
    currentLang = lang;
    document.documentElement.lang = lang;
    document.title = getTranslation('html_title');

    document.querySelectorAll('[data-lang-key]').forEach(element => {
        const key = element.dataset.langKey;
        const translation = getTranslation(key);
        if (translation) {
            element.textContent = translation;
        }
    });

    // Á°Æ‰øù‰∏ãÊãâËèúÂçïÊòæÁ§∫Ê≠£Á°ÆÁöÑÈÄâÂÆöËØ≠Ë®Ä
    const langSelector = document.getElementById('langSelector');
    if (langSelector.value !== lang) {
        langSelector.value = lang;
    }
}

/**
 * Âú®È°µÈù¢‰∏äÊòæÁ§∫Áä∂ÊÄÅÊ∂àÊÅØ
 */
function displayMessage(key, type, params = {}) {
    const statusMessage = document.getElementById('statusMessage');
    statusMessage.textContent = getTranslation(key, params);
    statusMessage.className = `status ${type}`;
    statusMessage.style.display = 'block';
}

// === È°µÈù¢Âä†ËΩΩÂíå‰∫ã‰ª∂ÁõëÂê¨ ===

document.addEventListener('DOMContentLoaded', function() {
    
    // === Ê†∏ÂøÉËΩ¨Êç¢ÈÄªËæë (Êú™ÊîπÂèò) ===
    const jsonFileInput = document.getElementById('jsonFileInput');
    const outputFileNameInput = document.getElementById('outputFileName');
    const convertButton = document.getElementById('convertButton');

    convertButton.addEventListener('click', function() {
        const file = jsonFileInput.files[0];
        if (!file) {
            displayMessage('status_no_file', 'error');
            return;
        }
        
        const outputFileName = outputFileNameInput.value.trim();
        if (!outputFileName) {
            displayMessage('status_no_filename', 'error');
            return;
        }

        const reader = new FileReader();
        reader.onload = function(event) {
            try {
                const cookies = JSON.parse(event.target.result);
                if (!Array.isArray(cookies)) {
                    displayMessage('status_not_list', 'error');
                    return;
                }
                const netscapeCookies = convertToNetscape(cookies);
                downloadFile(netscapeCookies, outputFileName);
                displayMessage('status_success', 'success', { fileName: outputFileName });
            } catch (error) {
                if (error instanceof SyntaxError) {
                    displayMessage('status_json_error', 'error');
                } else {
                    displayMessage('status_generic_error', 'error', { error: error.message });
                }
            }
        };
        reader.onerror = function() {
            displayMessage('status_read_error', 'error');
        };
        reader.readAsText(file);
    });

    function convertToNetscape(cookies) {
        const header = [
            '# Netscape HTTP Cookie File',
            '# https://curl.se/docs/http-cookies.html',
            '# This is a generated file! Do not edit.',
            ''
        ];
        const cookieLines = cookies.map(cookie => {
            const domain = cookie.domain || '';
            const includeSubdomains = domain.startsWith('.') ? 'TRUE' : 'FALSE';
            const path = cookie.path || '/';
            const secure = cookie.secure ? 'TRUE' : 'FALSE';
            const expiration = String(Math.floor(cookie.expirationDate || 0));
            const name = cookie.name || '';
            const value = cookie.value || '';
            return [domain, includeSubdomains, path, secure, expiration, name, value].join('\t');
        });
        return header.join('\n') + cookieLines.join('\n');
    }

    function downloadFile(content, fileName) {
        const blob = new Blob([content], { type: 'text/plain;charset=utf-s8;' });
        const link = document.createElement('a');
        const url = URL.createObjectURL(blob);
        link.href = url;
        link.setAttribute('download', fileName);
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
    }
    
    // === Â§öËØ≠Ë®ÄÂàùÂßãÂåñÈÄªËæë (Êú™ÊîπÂèò) ===

    // 1. ÁõëÂê¨ËØ≠Ë®ÄÈÄâÊã©Âô®ÁöÑÂèòÂåñ
    const langSelector = document.getElementById('langSelector');
    langSelector.addEventListener('change', (e) => {
        setLanguage(e.target.value);
    });
    
    // 2. ‰∏•Ê†ºËÆæÁΩÆÈªòËÆ§ËØ≠Ë®Ä‰∏∫Ëã±Êñá
    setLanguage('en');
});
</script>

</body>
</html>